

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.6/css/uikit.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.6/js/uikit.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.6/js/uikit-icons.min.js"></script>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/railscasts.min.css"/>
    <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <style>
    

body {
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
  font-size:90%;
  color: black;
}

p {
  margin: 0.5em;
}

pre code {
  font-family: "Monaco";
  font-size: 100%;
}

img {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  margin:10px;
}

h1, h2, h3 {
  border-bottom:thin solid black;
  margin-bottom: 0.5em;
  margin-top: 1em;
}

h1 {
  font-style:italic;
  font-size:130%;
}

h2 {
  font-size:110%;
}

h3 {
  font-size:100%;
}



  </style>

  <body class="lab">

    
  <div class="uk-offcanvas-content">
    <div id="offcanvas-usage" uk-offcanvas>
      <div class="uk-offcanvas-bar">
        <button class="uk-offcanvas-close" type="button" uk-close></button>
        <ul class="uk-nav">
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic01/book-a-donation-01/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Donation-01
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic02-a/book-a-donation-02/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Donation-02
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic02-b/book-b-donation-03/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Donation-03
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic03-a/book-a-solutions-donation-03/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Donation-03-Solutions
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic03-a/book-b-myrent-00-Baseline/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-00 (Baseline)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic03-a/book-c-myrent-01-Widgets/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-01 (Widgets)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic03-b/book-a-myrent-02-Listview/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-02 (Listview)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic03-b/book-b-event-handling/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Event-Handling
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic04-a/book-a-myrent-03-Action-Bar-Dialogs/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-03 (Action Bar & Dialogs)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic04-a/book-b-myrent-04-fileIO/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-04 (FileIO)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic04-b/book-a-myrent-05-Up-Button/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-05 (Up Button)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic04-b/book-b-java-8/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Lambda Expressions
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic04-b/book-c-event-handler-soln/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Event-Handling-Solution
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic05-a/book-a-myrent-06-Contact-Email/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-06 (Contact & Email)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic05-a/book-b-permissions/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-06a (Permissions)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic05-b/book-a-myrent-07-Fragments/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-07 (Fragments)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic05-b/book-b-twopane/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Two Pane
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic06-a/book-a-myrent-08-Deletion/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-08 (Deletion)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic06-a/book-b-myrent-09-Viewpager/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-09 (ViewPager)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic06-b/book-a-settings/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-10 (Settings)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic07-a/book-a-myrent-10-Maps-Google/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-11 (Maps - Google)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic07-a/book-b-myrent-10-Maps-MapBox/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-11a (Maps - MapBox)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic07-b/book-a-myrent-sqlite-SQLite/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRentSQLite (SQLite)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic08-a/book-a-myrent-12-SQLite/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-12 (SQLite)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic08-b/book-b-myrent-sqlite-ContentProvider/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRentSQLite (ContentProvider)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic09-a/book-a-myrent-service/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent (Play Service)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic09-a/book-a-myrent-service-test/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent (JUnit Test)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic09-a/book-b-myrent-14-Retrofit-Client/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-13 (Client)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic10-a/book-b-services/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-14 (Services)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic11-a/book-a-myrent-11-Camera/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-15 (Camera)
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic11-b/book-a-crypto/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
App Signing & Crypto
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/android-app-dev//topic11-c/book-a-myrent-16-Mongo/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
MyRent-16 (Mongo)
                </a>
              </li>
            
          
        </ul>
      </div>
    </div>
  </div>


    <div uk-sticky>
      <nav class="uk-navbar">
        <div class="uk-navbar-left">
          <ul class="uk-subnav uk-background-secondary uk-subnav-pill">
            <li><a href="#offcanvas-usage" uk-icon="icon: menu" , uk-toggle title="Switch Lab" pos="bottom"
                   uk-tooltip></a></li>
            <li class="uk-active"><a href="../index.html" uk-icon="icon: chevron-up" uk-toggle title="Parent Topic"
                                     pos="bottom" uk-tooltip>6-a: Deletion & ViewPager </a></li>
          </ul>
        </div>
        <div class="uk-navbar-right">
          <ul class="uk-subnav uk-background-secondary uk-subnav-pill"
              uk-switcher="connect: .switcher-container">
            
              <li><a href="#">MyRent-08 (Deletion)</a></li>
            
              <li><a href="#">01</a></li>
            
              <li><a href="#">02</a></li>
            
              <li><a href="#">03</a></li>
            
          </ul>
        </div>
      </nav>
    </div>

    <div class="uk-container uk-container-expand">
      <ul class="uk-switcher switcher-container">
        
          <li> <h1>Residence List Deletion &amp; ViewPager</h1>
<p>We introduce a facility to select and delete a subset of residences in the list view. The selected items need not be contiguous. The Android MultiChoiceModeListener interface is key to the implementation of this feature.</p>
</li>
        
          <li> <h1>Preview</h1>
<p><img src="img/02.png" alt="Figure 1: Long press to engage contextual menu to delete selection from list"></p>
</li>
        
          <li> <h1>Resources (Contextual Menu)</h1>
<p>Continue building the MyRent app that you developed in the previous lab.</p>
<p>This string resource is required:</p>
<pre><code>  &lt;string name=&quot;delete_residence&quot;&gt;Delete Residence&lt;/string&gt;</code></pre>
<p>Add a new context menu resource.</p>
<p>Filename: res/menu/residence_list_context.xml</p>
<pre><code>&lt;menu
  xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
    &lt;item android:id=&quot;@+id/menu_item_delete_residence&quot;
    android:icon=&quot;@android:drawable/ic_menu_delete&quot;
    android:title=&quot;@string/delete_residence&quot; /&gt;
&lt;/menu&gt;</code></pre>
<p>We would like the selected residences to appear highlighted for ease of identification. </p>
<ul>
<li>Create a new folder (directory) in <em>res</em> named <code>drawable</code>.</li>
</ul>
<p>Add the following xml file to <em>drawable</em>:</p>
<p>Filename: res/drawable/background_activated.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;
  &lt;item
    android:state_activated=&quot;true&quot;
    android:drawable=&quot;@android:color/darker_gray&quot;
    /&gt;
&lt;/selector&gt;</code></pre>
<p>Activate the <em>background_activated</em> state by adding the following attribute to res/layout/list_item_residence.xml.</p>
<ul>
<li>Failure to introduce this line of code will result in selected residence in the list remaining highlighted only as long as the mouse button is pressed.</li>
</ul>
<pre><code>    android:background=&quot;@drawable/background_activated&quot;</code></pre>
<p>Here is the complete file:</p>
<p>Filename: list_item_residence.xml</p>
<pre><code>&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:background=&quot;@drawable/background_activated&quot;
    android:orientation=&quot;vertical&quot;&gt;

    &lt;CheckBox
        android:id=&quot;@+id/residence_list_item_isrented&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:gravity=&quot;center&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:enabled=&quot;false&quot;
        android:focusable=&quot;false&quot;
        android:padding=&quot;4dp&quot;
         /&gt;

    &lt;TextView
        android:id=&quot;@+id/residence_list_item_geolocation&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_toLeftOf=&quot;@id/residence_list_item_isrented&quot;
        android:textStyle=&quot;bold&quot;
        android:paddingLeft=&quot;4dp&quot;
        android:paddingRight=&quot;4dp&quot;
        /&gt;

    &lt;TextView
        android:id=&quot;@+id/residence_list_item_dateTextView&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_below=&quot;@id/residence_list_item_geolocation&quot;
        android:layout_toLeftOf=&quot;@id/residence_list_item_isrented&quot;
        android:paddingLeft=&quot;4dp&quot;
        android:paddingRight=&quot;4dp&quot;
        android:paddingTop=&quot;4dp&quot;/&gt;

&lt;/RelativeLayout&gt;</code></pre>
<p>Implement step 3 before attempting to launch the contextual action bar.</p>
<p><img src="img/03.png" alt="Press and hold trash can to display menu label"></p>
</li>
        
          <li> <h1>ResidenceListFragment</h1>
<p>Add import statements:</p>
<pre><code>import android.widget.AbsListView;
import android.view.ActionMode;</code></pre>
<p>Change class signature by implementing MultiChoiceModeListener:</p>
<pre><code>public class ResidenceListFragment extends ListFragment implements OnItemClickListener, AbsListView.MultiChoiceModeListener</code></pre>
<p>Add a ListView field:</p>
<pre><code>private ListView listView;</code></pre>
<p>In onCreateView initialize the listView and set listener:</p>
<pre><code>    listView = (ListView) v.findViewById(android.R.id.list);
    listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
    listView.setMultiChoiceModeListener(this);</code></pre>
<p>Implement MultiChoiceModeListener methods:</p>
<pre><code>  /* ************ MultiChoiceModeListener methods (begin) *********** */
  @Override
  public boolean onCreateActionMode(ActionMode actionMode, Menu menu)
  {
    MenuInflater inflater = actionMode.getMenuInflater();
    inflater.inflate(R.menu.residence_list_context, menu);
    return true;
  }

  @Override
  public boolean onPrepareActionMode(ActionMode actionMode, Menu menu)
  {
    return false;
  }

  @Override
  public boolean onActionItemClicked(ActionMode actionMode, MenuItem menuItem)
  {
    switch (menuItem.getItemId())
    {
    case R.id.menu_item_delete_residence:
      deleteResidence(actionMode);
      return true;
    default:
      return false;
    }

  }

  private void deleteResidence(ActionMode actionMode)
  {
    for (int i = adapter.getCount() - 1; i &gt;= 0; i--)
    {
      if (listView.isItemChecked(i))
      {
        portfolio.deleteResidence(adapter.getItem(i));
      }
    }
    actionMode.finish();
    adapter.notifyDataSetChanged();
  }

  @Override
  public void onDestroyActionMode(ActionMode actionMode)
  {
  }

  @Override
  public void onItemCheckedStateChanged(ActionMode actionMode, int position, long id, boolean checked)
  {
  }

  /* ************ MultiChoiceModeListener methods (end) *********** */</code></pre>
<p>Portfolio requires a method to delete a residence:</p>
<pre><code>  public void deleteResidence(Residence residence)
  {
    residences.remove(residence);
    saveResidences();
  }</code></pre>
<p>Test your work by creating a number of residences and exercising a range of deletion options, for example:</p>
<ul>
<li>create a single residence and delete it</li>
<li>create three residences and delete the first and last</li>
<li>add some more residences and delete all.</li>
</ul>
<p>The application at the end of this lab is available for reference here: <a href="https://github.com/wit-ictskills-2016/myrent-08.git">myrent-08</a></p>
</li>
        
      </ul>
    </div>

    <script>
      $(document).ready(function() {
  const $images = $('.lab img');
  jQuery.each($images, function(i) {
    if ($images[i].alt.length > 0) {
      const divImg = $(document.createElement('div')).addClass('');
      $($images[i]).wrap(divImg);
      const divLabel = $(document.createElement('div')).addClass('uk-label uk-text-lowercase');
      divLabel.append($images[i].alt);
      $(divLabel).insertAfter($images[i]);
      $('<br>').insertAfter($images[i]);
    }
  });
});

    </script>
  </body>
</html>